services:
  # Railji Business Service
  - type: web
    name: railji-business
    env: node
    plan: free
    buildCommand: npm run build:shared && npm run build:business
    startCommand: cd apps/railji-business && npm install --omit=dev && node dist/main.js
    envVars:
      - key: NODE_ENV
        value: production
      - key: BUSINESS_PORT
        value: 10000
      - key: LOG_LEVEL
        value: info
      - key: CORS_ORIGIN
        scope: env
        value: https://frontend-domain.com
      - key: JWT_SECRET
        scope: secret
      - key: MONGODB_URI
        scope: secret

  # Railji Dashboard Service
  - type: web
    name: railji-dashboard
    env: node
    plan: free
    buildCommand: npm run build:shared && npm run build:dashboard
    startCommand: cd apps/railji-dashboard && npm install --omit=dev && node dist/main.js
    envVars:
      - key: NODE_ENV
        value: production
      - key: DASHBOARD_PORT
        value: 10001
      - key: LOG_LEVEL
        value: info
      - key: CORS_ORIGIN
        scope: env
        value: https://frontend-domain.com
      - key: JWT_SECRET
        scope: secret
      - key: MONGODB_URI
        scope: secret
